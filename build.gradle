/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.10.2/userguide/java_library_plugin.html
 */
plugins {
    // Apply the java-library plugin to add support for Java Library
    id "java-library"
    id "io.spring.dependency-management" version "1.0.6.RELEASE"
    id "maven"
    id "eclipse"
}

// In this section you declare where to find the dependencies of your project
repositories {
    jcenter()
    mavenLocal()
}

dependencyManagement {
     imports {
          mavenBom "io.spring.platform:platform-bom:${springPlatformVersion}"
     }
}

compileJava {
	sourceCompatibility = javaVersion
	targetCompatibility = javaVersion
	
    options.compilerArgs += ["-Xlint:unchecked"]
}

def buildTimestamp = new Date().format("yyyyMMdd-hhmmss");

jar {
	enabled = true
	from sourceSets.main.allSource
	manifest {
		attributes (
			"gradle-version": gradleVersion,
			"java-version": javaVersion,
			"spring-platform-version": springPlatformVersion,
			"build-version": version,
			"build-timestamp": buildTimestamp
		)
	}
}

build.finalizedBy install

eclipse {
	jdt {
		sourceCompatibility = javaVersion
		targetCompatibility = javaVersion
		javaRuntimeName = "JavaSE-" + javaVersion
		
		
		file {
			withProperties { properties ->
				properties.put("org.eclipse.jdt.core.compiler.processAnnotations", "disabled")
				properties.put("org.eclipse.jdt.core.compiler.codegen.targetPlatform", javaVersion)
			}
		}
	}
}

dependencies {
	/*
	 * compile dependencies
	 */
	api ("accelerate:accelerate-commons:${accelerateCommonsVersion}")
	
	implementation ("org.springframework.boot:spring-boot-starter-aop")
	implementation ("org.springframework.boot:spring-boot-starter-jdbc")
	implementation ("org.springframework.boot:spring-boot-starter-web")
	implementation ("org.springframework.boot:spring-boot-starter-security")
	implementation ("org.springframework.boot:spring-boot-starter-actuator")
	
	testImplementation ("org.springframework.boot:spring-boot-starter-test")
	
	testRuntimeOnly ("org.springframework.boot:spring-boot-devtools")
	testRuntimeOnly ("org.springframework.boot:spring-boot-starter-tomcat")
	testRuntimeOnly ("org.jolokia:jolokia-core")
}
